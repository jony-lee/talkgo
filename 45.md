## 网络收发过程中缓冲区的位置

### 关于缓冲区位置的问题

环形缓冲区

sk_buff

套接字缓冲区

实际上，sk_buff、套接字缓冲、连接跟踪等，都通过slab分配器来管理。可以直接通过/proc/slabinfo 来查看他们占用的内存大小。

### 内核协议栈，是通过一个内核线程的方式来运行的吗

TODO

### 最大连接数是不是受限于65535个端口

首先要明白，LINUX协议栈，通过五元组来标志一个连接（协议-源IP-源端口-目的IP-目的端口）

分别从客户端和服务端进行考虑

客户端每次发起请求都需要分配一个本地端口去连接远程服务器，所以客户端最多发起65535个连接。

而服务端通常监听在80端口，等待客户端的连接。根据五元组结构，我们可以知道，客户端的IP和端口都是可变的，因此服务端理论连接数可以很大，实际上，由于linux协议栈本身的性能，以及物理和软件的资源限制，这么大的连接目前还远远达不到。